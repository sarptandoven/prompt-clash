// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String?
  googlePic String?
  avatarUrl String?      // FLUX avatar
  ability   String?      // 5-word prompt
  elo       Int          @default(1200)
  createdAt DateTime     @default(now())
  battlesA  Battle[] @relation("A")
  battlesB  Battle[] @relation("B")
}

model Battle {
  id        String   @id @default(uuid())
  arena     String
  aId       String
  bId       String
  aImg      String
  bImg      String
  aScore    Float
  bScore    Float
  winnerId  String
  createdAt DateTime     @default(now())

  a         User @relation("A", fields:[aId], references:[id])
  b         User @relation("B", fields:[bId], references:[id])
} 